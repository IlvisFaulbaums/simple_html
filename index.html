<h2>Simple Poll</h2>

<button onclick="vote('yes')">Yes</button>
<button onclick="vote('no')">No</button>

<h3 id="results">Loading...</h3>

<script>
async function load() {
  const res = await fetch("/results");
  const data = await res.json();

  let text = "";
  data.forEach(row => {
    text += row.option + ": " + row.count + " | ";
  });

  document.getElementById("results").innerText = text;
}

async function vote(option) {
  await fetch("/vote", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({option})
  });
  load();
}

load();
setInterval(load, 2000);
</script>
